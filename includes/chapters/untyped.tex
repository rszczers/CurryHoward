\section{Rachunek \(\lambda\)}
Niech  \(V\) będzie przeliczalnie nieskończonym zbiorem zmiennych przedmiotowych \(x,\ y,\ \dots\) (indeksowanych być może liczbami naturalnymi). Elementy takiego zbioru będziemy nazywali \emph{\(\lambda\)-zmiennymi}.

\begin{definicja}(Zbiór \(\mathbf{\tilde\Lambda}\) pretermów)\\
Zbiorem pretermów będziemy nazywali najmniejszy (w sensie mnogościowym) zbiór wyrażeń \(\mathbf{\tilde\Lambda}\) taki, że:
  \begin{enumerate}[label={P\arabic*.}, ref={(P\arabic*)}]
  \setlength\itemsep{0em}
  \item Jeśli \(x \in V\), to \(x\in\mathbf{\tilde\Lambda}\).\label{pret1}
  \item Jeśli \(M,\,N\in \mathbf{\tilde\Lambda}\), to \((M\,N)\in\mathbf{\tilde\Lambda}\).\label{pret2}
  \item Jeśli \(x\in V\) i \(M\in\mathbf{\tilde\Lambda}\), to \((\lambda x.\,M)\in\mathbf{\tilde\Lambda}\).\label{pret3}
  \end{enumerate}
\end{definicja}\label{def:lambda-untyped}
Korzystając z notacji Backusa-Naura induktywną definicję \ref{def:lambda-untyped} możemy równoznacznie wyrazić w postaci
\begin{align*}
  \mathbf{\tilde\Lambda}\ \leftarrow \ V\quad |\quad (MN) \quad |\quad (\lambda V.\, \mathbf{\tilde\Lambda})
\end{align*}
Wyrażenia postaci \ref{pret2} nazywamy \emph{aplikacjami} \(M\) do \(N\). Symbol \(\lambda\) występujący w \ref{pret3} nazywamy \emph{\(\lambda\)-abstraktorem}, zaś wyrażenia powstałe przez zastosowanie tej reguły to \emph{\(\lambda\)-abstrakcje}. W wyrażeniu postaci \((\lambda x.\,M)\) preterm \(M\) jest w \emph{zasięgu} \(\lambda\)-abstraktora, a zmienna \(x\) jest przez niego \emph{związana}. Ponadto, będziemy stosowali następujące konwencje notacyjne:
\begin{easylist}
  & najbardziej zewnętrzne nawiasy bedą pomijane,
  & aplikacja wiąże lewostronnie; wyrażenia postaci \((PQ)R\) będą zapisywane w postaci \(PQR\),
  & \(\lambda\)-abstrakcja wiaże prawostronnie: \(\lambda x_1.\, (\lambda x_2.\,P)\) zapisujemy  \(\lambda x_1.\, \lambda x_2.\,P\),
  & następujące po sobie \(\lambda\)-abstrakcje postaci \(\lambda x_1 . \, (\lambda x_2 . \, \dots ( \lambda x_n .\, P) \dots )\) zapisujemy zbiorczo: \(\lambda x_1 \, x_2 \, \dots \, x_n .\, P\).
\end{easylist}

\begin{przyklad}(Konstrukcja \(\lambda\)-pretermów)

  \begin{easylist}
    & Pretermy z regułą \ref{pret1} ostatnią regułą konstrukcji: x, y, z,
    & : \(x\,x,\ y\,x,\ x\,(x\,z)\),
    & : \( (\lambda x . (x z)), (\lambda y . (\lambda z . x)), (\lambda x . (\lambda x . (x x))),\)
    & : \(((\lambda x . (x z)) y), (y (\lambda x . (x z))), ((\lambda x . x)(\lambda x . x)).\)
  \end{easylist}
\end{przyklad}

\begin{definicja}(Zbiór \(FV\) zmiennych wolnych)\\
  Z dowolnym pretermem \(M\) wiążemy zbiór \(FV(M)\) \emph{zmiennych wolnych} w \(M\) określony w poniższy sposób:
\begin{align*}
    \mathrm{FV}(x) &= \{x\}\\
    \mathrm{FV}(\lambda x .\, P)  &= \mathrm{FV}(P)\setminus\{x\}\\
    \mathrm{FV}(P Q) &= \mathrm{FV}(P)\cup\mathrm{FV}(Q)
\end{align*}
Jesli \(\mathrm{FV}(M)=\emptyset\), to mówimy, że \(M\) jest \emph{domknięty}.
\end{definicja}

\begin{definicja}(Podstawienie)\\
\emph{Podstawieniem} \([x/N]\) pretermu \(N\) za \(\lambda\)-zmienną \(x\) w \(M\) nazwamy następująco zdefiniowane przekształcenie:
  \begin{align*}
    x[x/N] &= N,\\
    y[x/N] &= y,\ &\text{o ile}\ x\neq y,\\
    (PQ)[x/N] &= P[x/N]\,Q[x/N],\\
    (\lambda y.\, P)[x/N] &= \lambda y.\,P[x/N],\ &\text{gdzie}\ x\neq y\ \text{i}\ y\not\in \mathrm{FV}(N).\\
  \end{align*}
\end{definicja}


\noindent Zachodzą następujące fakty:
\begin{fakt}
  \begin{enumerate}[label=({\alph*})]
    \item Jeśli \(x\not\in\mathrm{FV}(M)\), to \(M[x/N]\) jest poprawnym podstawieniem i \(M[x/N]=M\).
    \item Jeśli \(M[x/N]\) jest poprawnym podstawieniem, to \(y\in\mathrm{FV}(M[x/N]\) wtw, gdy albo \(y\in\mathrm{FV}(M)\)
      i \(x\neq y\), albo \(y\in \mathrm{FV}(N)\) i \(x\in \mathrm{FV}(M)\).
    \item Podstawienie \(M[x/x]\) jest poprawne i \(M[x/x]=M\).
    \item Jeśli \(M[x/y]\) jest poprawnym podstawieniem, to \(M[x/y]\) ma tę samą długość, co \(M\).
  \end{enumerate}
\begin{dowod}
  \qed
\end{dowod}
\end{fakt}

\begin{fakt}
Powiedzmy, że \(M[x/N]\) jest poprawnym podstawieniem i \(N[y/L]\) i \(M[x/N][y/L]\) są poprawnymi podstawieniami, gdzie
  \(x\neq y\). Jeśli \(x\not\in \mathrm{FV}(L)\) lub \(y\not\in\mathrm{FV}(M)\), to \(M[y/L]\) i \( M[y/L]\left[x/N[y/L]\right] \) jest poprawnym podstawieniem oraz
  \[
    M[x/N][y/L]=M[y/L][x/N[y/L]].
  \]
\begin{dowod}
  \qed
\end{dowod}
\end{fakt}

\begin{fakt}
Jesli \(M[x/y]\) jest poprawnym postawieniem i \(y\not\in\mathrm{FV}(M)\), to \(M[x/y][y/x]\) jest poprawnym podstawieniem oraz
  \(M[x/y][y/x]=M\).
\begin{dowod}
  \qed
\end{dowod}
\end{fakt}


